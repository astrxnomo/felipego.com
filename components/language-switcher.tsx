"use client"

import { Button } from "@/components/ui/button"
import Link from "next/link"
import { usePathname } from "next/navigation"

const SpainFlag = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 32 32"
  >
    <path fill="#f1c142" d="M1 10h30v12H1z" />
    <path
      d="M5 4h22c2.208 0 4 1.792 4 4v3H1V8c0-2.208 1.792-4 4-4m22 24H5c-2.208 0-4-1.792-4-4v-3h30v3c0 2.208-1.792 4-4 4"
      fill="#a0251e"
    />
    <path
      d="M27 4H5a4 4 0 0 0-4 4v16a4 4 0 0 0 4 4h22a4 4 0 0 0 4-4V8a4 4 0 0 0-4-4m3 20c0 1.654-1.346 3-3 3H5c-1.654 0-3-1.346-3-3V8c0-1.654 1.346-3 3-3h22c1.654 0 3 1.346 3 3z"
      opacity=".15"
    />
    <path
      d="M27 5H5a3 3 0 0 0-3 3v1a3 3 0 0 1 3-3h22a3 3 0 0 1 3 3V8a3 3 0 0 0-3-3"
      fill="#fff"
      opacity=".2"
    />
    <path
      d="M12.614 13.091c.066-.031.055-.14-.016-.157.057-.047.02-.15-.055-.148.04-.057-.012-.144-.082-.13.021-.062-.042-.127-.104-.105.01-.068-.071-.119-.127-.081.004-.068-.081-.112-.134-.069-.01-.071-.11-.095-.15-.035-.014-.068-.111-.087-.149-.028-.027-.055-.114-.057-.144-.004-.03-.047-.107-.045-.136.002a.08.08 0 0 0-.09-.034c.009-.065-.066-.115-.122-.082.002-.07-.087-.111-.138-.064-.013-.064-.103-.087-.144-.036-.02-.063-.114-.075-.148-.017-.036-.056-.129-.042-.147.022-.041-.055-.135-.031-.146.036a.1.1 0 0 0-.037-.016l.015-.025h.002c.058-.107.004-.256-.106-.298v-.098h.099v-.154h-.099v-.101h-.151v.101h-.099v.154h.099v.096c-.113.04-.169.191-.11.299h.002l.014.024a.1.1 0 0 0-.04.017c-.011-.067-.106-.091-.146-.036-.018-.064-.111-.078-.147-.022-.034-.057-.128-.046-.148.017-.041-.052-.131-.028-.144.036-.051-.047-.139-.006-.138.064-.056-.033-.131.017-.122.082a.085.085 0 0 0-.091.034c-.029-.047-.106-.049-.136-.002-.03-.054-.117-.051-.143.004-.037-.059-.135-.04-.149.028-.039-.06-.14-.037-.15.035-.053-.043-.138 0-.134.069-.056-.038-.137.013-.127.081-.062-.021-.125.044-.104.105-.05-.009-.096.033-.096.084q0 .026.014.047c-.075-.002-.111.101-.055.148-.071.017-.082.125-.016.157-.061.035-.047.138.022.154a.085.085 0 0 0 .048.139c-.023.048.009.11.06.118-.013.03-.012.073-.012.106.09-.019.2.006.239.11-.015.068.065.156.138.146.06.085.133.165.251.197-.021.093.064.093.123.118-.013.016-.043.063-.055.081.024.013.087.041.113.051q.006.027.004.031c.091.501 2.534.502 2.616-.001v-.002l.004.004q-.002-.003.004-.031l.118-.042-.062-.09c.056-.028.145-.025.123-.119a.45.45 0 0 0 .253-.198c.073.01.153-.078.138-.146.039-.104.15-.129.239-.11 0-.035.002-.078-.013-.109a.086.086 0 0 0 .049-.115c.062-.009.091-.093.048-.139.069-.016.083-.12.022-.154Zm-.296-.114a.3.3 0 0 1-.034.141c-.198-.137-.477-.238-.694-.214l-.011-.024v-.002c.064-.021.074-.12.015-.153.048-.032.045-.113-.005-.141.328-.039.728.09.728.393Zm-.956-.275q-.001.096-.054.175c-.274-.059-.412-.169-.717-.185-.007-.082-.005-.171-.011-.254.246-.19.81-.062.783.264Zm-1.191-.164q-.002.076-.007.151c-.302.013-.449.122-.719.185-.26-.406.415-.676.73-.436q-.004.05-.004.101Zm-1.046.117a.1.1 0 0 0 .034.069c-.058.033-.049.132.015.152v.002l-.011.024c-.219-.024-.495.067-.698.206-.155-.377.323-.576.698-.525a.09.09 0 0 0-.039.072Zm-.048 1.683v.002s-.002 0-.003.002l.003-.003Zm5.056 2.518c.275-.65.201-.508-.319-.787v-.873c.149-.099-.094-.121.05-.235h.072v-.339h-.99v.339h.075c.136.102-.091.146.05.235v.76c-.524-.007-.771.066-.679.576h.039l.016.036c.14-.063.372-.107.624-.119v.224c-.384.029-.42.608 0 .8v1.291c-.053.017-.069.089-.024.123.007.065-.058.092-.113.083v.269a.36.36 0 0 1-.17.028v.616a4.5 4.5 0 0 1 1.353 0v-.616a.4.4 0 0 1-.17-.028v-.268c-.054.008-.118-.017-.113-.081.048-.033.034-.108-.021-.126v-.932q.057.026.105.053a.313.313 0 0 0 .031.429l.057-.053c.222-.329.396-.743-.193-.896v-.35c.177-.019.289-.074.319-.158Zm-5.773-.798c-.153-.062-.39-.098-.653-.102v-.76c.094-.041.034-.115-.013-.159.02-.038.092-.057.056-.115h.043v-.261h-.912v.261h.039c-.037.059.039.078.057.115-.047.042-.108.118-.014.159v.873c-.644.133-.611.748 0 .945v.35c-.59.154-.415.567-.193.896l.057.053a.313.313 0 0 0 .031-.429q.048-.027.105-.053v.932c-.055.018-.069.093-.021.126.005.064-.059.089-.113.081v.268a.35.35 0 0 1-.17.028v.616a4.5 4.5 0 0 1 1.352 0v-.616a.36.36 0 0 1-.169-.028v-.269c-.055.008-.119-.018-.113-.083.045-.034.03-.107-.024-.124v-1.29c.421-.192.383-.772 0-.8v-.224c.575.035.796.314.653-.392Z"
      fill="#9b8028"
    />
    <path
      d="M12.531 14.533h-4.28l.003 2.572v1.485c0 .432.226.822.591 1.019.473.252 1.024.391 1.552.391s1.064-.135 1.544-.391a1.15 1.15 0 0 0 .591-1.019z"
      fill="#a0251e"
    />
  </svg>
)

const USAFlag = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 32 32"
  >
    <rect x="1" y="4" width="30" height="24" rx="4" ry="4" fill="#fff" />
    <path
      d="M1.638 5.846h28.724A3.99 3.99 0 0 0 27 4H5a3.99 3.99 0 0 0-3.362 1.846m.392 1.846C2.022 7.795 2 7.894 2 8v1.539h29V8c0-.105-.022-.204-.03-.308zM2 11.385h29v1.846H2zm0 3.692h29v1.846H2zm-1 3.692h30v1.846H1zM1 24c0 .105.023.204.031.308h29.938c.008-.103.031-.202.031-.308v-1.539H1zm29.362 2.154H1.638A3.99 3.99 0 0 0 5 28h22a3.99 3.99 0 0 0 3.362-1.846"
      fill="#a62842"
    />
    <path d="M5 4h11v12.923H1V8c0-2.208 1.792-4 4-4" fill="#102d5e" />
    <path
      d="M27 4H5a4 4 0 0 0-4 4v16a4 4 0 0 0 4 4h22a4 4 0 0 0 4-4V8a4 4 0 0 0-4-4m3 20c0 1.654-1.346 3-3 3H5c-1.654 0-3-1.346-3-3V8c0-1.654 1.346-3 3-3h22c1.654 0 3 1.346 3 3z"
      opacity=".15"
    />
    <path
      d="M27 5H5a3 3 0 0 0-3 3v1a3 3 0 0 1 3-3h22a3 3 0 0 1 3 3V8a3 3 0 0 0-3-3"
      fill="#fff"
      opacity=".2"
    />
    <path
      fill="#fff"
      d="m4.601 7.463.592-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.226.695.592-.429.591.429zm2.979 0 .592-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.226.695.592-.429.591.429zm2.98 0 .591-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.225.695.591-.429.591.429zm-4.494 1.82.592-.429h-.731l-.226-.696-.226.696h-.731l.591.429-.226.696.592-.43.591.43zm2.98 0 .591-.429h-.731l-.226-.696-.226.696h-.731l.591.429-.225.696.591-.43.591.43zm2.979 0 .591-.429h-.731l-.226-.696-.226.696h-.731l.592.429-.226.696.591-.43.592.43zm-5.959 3.641.592-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.226.695.592-.429.591.429zm2.98 0 .591-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.225.695.591-.429.591.429zm2.979 0 .591-.43h-.731l-.226-.695-.226.695h-.731l.592.43-.226.695.591-.429.592.429zm1.514-5.461.591-.43h-.731l-.226-.695-.226.695h-.731l.592.43-.226.695.591-.429.592.429zm-8.938 3.641.592-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.226.695.592-.43.591.43zm2.979 0 .592-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.226.695.592-.43.591.43zm2.98 0 .591-.43h-.731l-.226-.695-.226.695h-.731l.591.43-.225.695.591-.43.591.43zm2.979 0 .591-.43h-.731l-.226-.695-.226.695h-.731l.592.43-.226.695.591-.43.592.43zm-8.938 3.64.592-.429h-.731l-.226-.696-.226.696h-.731l.591.429-.226.696.592-.43.591.43zm2.979 0 .592-.429h-.731l-.226-.696-.226.696h-.731l.591.429-.226.696.592-.43.591.43zm2.98 0 .591-.429h-.731l-.226-.696-.226.696h-.731l.591.429-.225.696.591-.43.591.43zm2.979 0 .591-.429h-.731l-.226-.696-.226.696h-.731l.592.429-.226.696.591-.43.592.43z"
    />
  </svg>
)

export function LanguageSwitcher() {
  const pathname = usePathname()
  const isSpanish = pathname.startsWith("/es")
  const targetUrl = isSpanish
    ? pathname.replace(/^\/es/, "") || "/"
    : `/es${pathname}`

  return (
    <Button variant="outline" size="icon-lg" asChild className="z-99">
      <Link href={targetUrl} scroll={false}>
        {isSpanish ? <SpainFlag /> : <USAFlag />}
        <span className="sr-only">
          {isSpanish ? "Switch to English" : "Cambiar a espa√±ol"}
        </span>
      </Link>
    </Button>
  )
}
